{% load static %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" crossorigin="anonymous"></script>
<script src="{% static 'js/script.js' %}"></script>

{% if session_expired %}

<script>
    $(document).ready(function () {
        $('#sessionExpiredModal').modal('show');
    });
</script>
{% endif %}
{% block extra_js %}
<script>
    function checkActivity() {
        fetch('{% url "check_activity" %}')
            .then(response => response.json())
            .then(data => {
                if (data.status === 'logout') {
                    window.location.href = '{% url "login" %}?session_expired=true';
                }
            });
    }

    // Verifique a atividade a cada minuto
    setInterval(checkActivity, 60000);
</script>
{% endblock %}